/* grips (c) 2012 Kyle Simpson | http://getify.mit-license.org/ */
;Object.keys||(Object.keys=function(t){var n,r=[];for(n in t)t.hasOwnProperty(n)&&r.push(n);return r}),Array.isArray||(Array.isArray=function(t){return Object.prototype.toString(t)==="[object Array]"}),function(t){function r(){function e(){}function i(){var e=t.grips;return t.grips=n,e}function s(e){e in h||(h[e]={collection:"",extend:null,partials:{}})}function o(e,t){s(e),h[e].extend=t}function u(t){var n,r,i;if(typeof t=="object"){if(t===null)return t;if(Array.isArray(t)){r=[];for(n=0;n<t.length;n++)typeof t[n]=="object"?i=u(t[n]):i=t[n],r.push(i)}else{t instanceof e?r=new e:r={};for(n in t)t.hasOwnProperty(n)&&(typeof (t[n]==="object")?i=u(t[n]):i=t[n],r[n]=i)}}else r=t;return r}function a(e,t){var n=t.match(/^(.+)#/);n&&(n=n[1]);if(!n)throw p;s(n),h[n].partials[t.replace(/^.*#/,"#")]=function(n,r){var i;try{i=e(n,r)}catch(s){throw p}if(i instanceof Error)throw i;return i}}function f(e,t,n){if(!e)return"";var r,i=!1,s,o,u=[],a=!1,f=!1;r=e.match(/^(.+)#/),r&&(r=r[1],a=!0);if(!a&&d.length>0)r=d[d.length-1];else if(!a||d.length>0&&d[d.length-1]===r){if(!r)throw p}else d.push(r),f=!0;if(r in h){e=e.replace(/^(.+)#/,"#"),o=r+e,v.push(o);for(s=0;s<v.length-1;s++)if(v[s]===o)throw p;a?u.push(r):u=u.concat(d);if(!(e in h[r].partials)&&h[r].extend){o=h[r].extend;while(o&&o in h)u.push(o),o=h[o].extend}for(s=0;s<u.length;s++)if(e in h[u[s]].partials){i=h[u[s]].partials[e](t,n);break}}if(i!==!1)return v.pop(),f&&d.pop(),i;throw p}function l(e,t){return typeof e=="string"&&(t.html&&/[&<>"]/.test(e)&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")),t.string&&(e=e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/'/g,"\\'").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\t/g,"\\t")),t.url&&(e=encodeURIComponent(e))),e}var c,h={},p=new Error("Unknown error"),d=[],v=[];return c={extend:o,cloneObj:u,definePartial:a,strEscapes:l,render:f,noConflict:i,sandbox:r,RangeLiteralHash:e,collections:h},c}var n=t.grips;t.grips=r()}(this);