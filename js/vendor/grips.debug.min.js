/* grips (c) 2012 Kyle Simpson | http://getify.mit-license.org/ */
;Object.keys||(Object.keys=function(t){var n,r=[];for(n in t)t.hasOwnProperty(n)&&r.push(n);return r}),Array.isArray||(Array.isArray=function(t){return Object.prototype.toString(t)==="[object Array]"}),Object.create||(Object.create=function(t){function n(){}return n.prototype=t,new n}),Object.prototype.toJSON||(Object.prototype.toJSON=function(){function t(e){for(var t=0;t<r.length;t++)if(r[t]===e)return!0;return!1}function n(e){function i(e){if(typeof e=="object"){if(e!==null){if(Date===e.constructor||Number===e.constructor||Boolean===e.constructor||String===e.constructor||RegExp===e.constructor)return e;if(!t(e))return n(e)}return null}return e}var s,o,u;if(Array.isArray(e)){r.push(e),o=[];for(s=0;s<e.length;s++)o.push(i(e[s]));return r.pop(),o}if(typeof e=="object"){if(e!==null){if(Date===e.constructor||Number===e.constructor||String===e.constructor||Boolean===e.constructor||RegExp===e.constructor)return e;if(!t(e)){r.push(e),o={};for(s in e)e.hasOwnProperty(s)&&(u=i(e[s]),u!==null&&(o[s]=u));return r.pop(),o}}return null}return e}var r=[],i;return i=n(this),r=[],i},Object.defineProperty&&Object.defineProperty(Object.prototype,"toJSON",{enumerable:!1})),function(t){function r(){function i(){}function s(){var e=t.grips;return t.grips=n,e}function o(e){e in d||(d[e]={collection:"",extend:null,partials:{}})}function u(e,t){o(e),d[e].extend=t}function a(e){var t,n,r;if(typeof e=="object"){if(e===null)return e;if(Array.isArray(e)){n=[];for(t=0;t<e.length;t++)typeof e[t]=="object"?r=a(e[t]):r=e[t],n.push(r)}else{e instanceof i?n=new i:n={};for(t in e)e.hasOwnProperty(t)&&(typeof (e[t]==="object")?r=a(e[t]):r=e[t],n[t]=r)}}else n=e;return n}function f(t,n,r,i){return r="["+t+"] "+r,i&&(r+="; "+i.toString()),new e(r,n,i?i.stack:null)}function l(t,n,r){var i=n.match(/^(.+)#/);i&&(i=i[1]);if(!i)throw new e("Missing collection ID: "+n)||v;o(i),d[i].partials[n.replace(/^.*#/,"#")]=function(n,s){var o,u;try{u=t(n,s)}catch(a){throw o=f(i,r,"Unexpected error",a),o.stack=a.stack,o}if(u instanceof Error)throw u;return u}}function c(t,n,r){if(!t)return"";var i,s=!1,o,u,a=[],f=!1,l=!1;i=t.match(/^(.+)#/),i&&(i=i[1],f=!0);if(!f&&m.length>0)i=m[m.length-1];else if(!f||m.length>0&&m[m.length-1]===i){if(!i)throw new e("Required collection ID missing: "+t)||v}else m.push(i),l=!0;if(i in d){t=t.replace(/^(.+)#/,"#"),u=i+t,g.push(u);for(o=0;o<g.length-1;o++)if(g[o]===u)throw new e("Recursive template include: "+u)||v;f?a.push(i):a=a.concat(m);if(!(t in d[i].partials)&&d[i].extend){u=d[i].extend;while(u&&u in d)a.push(u),u=d[u].extend}for(o=0;o<a.length;o++)if(t in d[a[o]].partials){s=d[a[o]].partials[t](n,r);break}}if(s!==!1)return g.pop(),l&&m.pop(),s;throw new e("["+t+"] Template not found")||v}function h(e,t){return typeof e=="string"&&(t.html&&/[&<>"]/.test(e)&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")),t.string&&(e=e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/'/g,"\\'").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\t/g,"\\t")),t.url&&(e=encodeURIComponent(e))),e}var e=function(){function n(){}function r(e,r,i){var s=this===t?new n:this;return s.message=e,s.ref=r,s.stack=i,s}return n.prototype=r.prototype=Object.create(ReferenceError.prototype),r.prototype.constructor=r,r.prototype.toString=function(){var t="TemplateError: "+this.message;return this.ref&&(t+="; "+JSON.stringify(this.ref)),t=t.replace(/[\n\r]+/g," ").replace(/\s+/g," "),this.stack&&(t+="\n"+this.stack),t},r}(),p,d={},v=new Error("Unknown error"),m=[],g=[];return p={extend:u,cloneObj:a,definePartial:l,strEscapes:h,render:c,error:f,TemplateError:e,noConflict:s,sandbox:r,RangeLiteralHash:i,collections:d},p}var n=t.grips;t.grips=r()}(this);